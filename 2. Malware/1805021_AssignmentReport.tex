\documentclass{article}
\usepackage[utf8]{inputenc}
\usepackage{multirow}
\usepackage{multicol}
\usepackage[table]{xcolor}
\usepackage{amsmath}
\usepackage{graphicx}
\usepackage{hyperref}

\title{%
  \begin{center}
        \vspace*{1cm}
            
        \Huge
        \textbf{Computer Security Sessional}
            
        \vspace{0.5cm}
        \LARGE
        CSE - 406
            
        \vspace{2cm}
            
        \Huge
        \texttt{Malware Assignment Report}
                        
        \vspace{0.8cm}
                        
        \Large
        Abdus Samee\\
        ID: 1805021\\
        Section: A\\
        Dept: CSE\\
    \end{center}
  } 

\date{}

\begin{document}

\maketitle
\newpage

\section{Task 1}
The docker containers $6$ and $7$ were assigned as the \textit{attacked} and the docker container $8$ as the \textit{designated host} where the exfiltrated files would be uploaded.\\

\subsection{Docker Container Information}
We get the ip addresses of the desired docker containers using the following aliases in the Ubuntu cloud VM. The command \textbf{dockps} is used to find all the container ids and the command \textbf{docksh} is used to connect to a particular docker container.
\begin{center}
    \includegraphics[scale=0.3]{task1/docker.png}
\end{center}

The following function returns a list of ip addresses of docker container $6$ and $7$ respectively. All the files ending with the extension \textbf{foo} and containing the string \textbf{foovirus} would be exfiltrated from these containers.
\begin{center}
    \includegraphics[scale=0.3]{task1/ip.png}
\end{center}

With the following line in the code, we connect to the docker container $8$. The exfiltrated files are uploaded at this location.
\begin{center}
    \includegraphics[scale=0.3]{task1/target.png}
\end{center}

The username and passwords are obtained using the following functions. Note, all the containers have the same username \textbf{root} and same password \textbf{mypassword}.
\begin{center}
    \includegraphics[scale=0.25]{task1/username.png}
\end{center}
\begin{center}
    \includegraphics[scale=0.25]{task1/password.png}
\end{center}


\subsection{Obtain Target Files}
We find all the \textbf{foo} files with the string \textbf{foovirus} at the top-level directory of a docker container executing the command below:
\begin{center}
    \includegraphics[scale=0.4]{task1/cmd.png}
\end{center}

Then we get all the target files at the attacking program:
\begin{center}
    \includegraphics[scale=0.5]{task1/get_from_host.png}
\end{center}

The main part comes after this. A copy of the virus is kept at the \textit{attacked} machine:
\begin{center}
    \includegraphics[scale=0.3]{task1/copy.png}
\end{center}

As a result of the above executions, the $2$ \textbf{foo} files are detected in container $6$.
\begin{center}
    \includegraphics[scale=0.3]{task1/task1p1.png}
\end{center}

Also, the $2$ files in container $7$ are also detected. But as shown in figure, only $1$ file matches our interest, as per our design.
\begin{center}
    \includegraphics[scale=0.3]{task1/task1p2.png}
\end{center}


\subsection{Upload Exfiltrated Files}
After connecting to the container $8$, the exfiltrated files are uploaded normally as follows: 
\begin{center}
    \includegraphics[scale=0.3]{task1/file-transfer.png}
\end{center}


\subsection{Prepare Docker Containers}
We prepare the docker containers as follows:\\\\
The container $6$ has two \textbf{foo} files with desired string.
\begin{center}
    \includegraphics[scale=0.25]{task1/cont6.png}
\end{center}
The container $7$ has a \textbf{foo} and a \textbf{txt} file with the desired string.
\begin{center}
    \includegraphics[scale=0.25]{task1/cont7.png}
\end{center}
The container $8$ is currently empty before the execution of the program.
\begin{center}
    \includegraphics[scale=0.25]{task1/cont8.png}
\end{center}


\subsection{Containers after Execution}
The program \textbf{1805021\_1.py} was run and the docker containers had the following desired states:\\\\

The container $6$ now has an identical copy of the attacking program, along with the $2$ \textbf{foo} files it had before. 
\begin{center}
    \includegraphics[scale=0.25]{task1/cont6_after.png}
\end{center}

The container $7$ also has an identical copy of the attacking program, along with the \textbf{foo} and \textbf{txt} files it had before. 
\begin{center}
    \includegraphics[scale=0.25]{task1/cont7_after.png}
\end{center}

The container $8$ now has all the $3$ \textbf{foo} files with the desired string \textbf{foovirus}, but does not has the \textbf{txt} file with the same desired string from container $7$.
\begin{center}
    \includegraphics[scale=0.25]{task1/cont8_after.png}
\end{center}

Thus, we can say that the virus \textbf{1805021\_1.py} now has the ability to hop into other machines, along with filtering \textbf{foo} files like before.


 \section{Modifications in NS2}
 The following modifications were made in the source code of NS2:
 \begin{itemize}
     \item A new queue file named \textbf{diff-queue.c} and its header file \textbf{diff-queue.h} have been added. This queue helps in backlog congestion by creating multiple queues in each agent for multiple destinations. The packets are dequeued based on the \textit{DiffQ Priority}.
     \item Three new constants \textbf{sent-packets}, \textbf{ALPHA = $0.125$} and \textbf{BETA = $0.25$} have been included in the \textbf{tcp.h} file for manipulating the congestion window inside the \textbf{tcp.cc} file. The \textbf{sent-packets} variable is increased/decreased whenever a packet is sent and its \textbf{ACK} is received. Besides, some of the calculations and constants were manipulated using the constants mentioned above.
 \end{itemize}

\end{document}
